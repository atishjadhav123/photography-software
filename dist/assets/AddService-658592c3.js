import{h as S,i as w,k,l as C,r as d,y as n,j as e}from"./index-fc58f280.js";import{u as q,c as E,a as m,b as F,d as $}from"./index.esm-2d33e004.js";const P=()=>{var b;const[y,{isSuccess:c,isLoading:u,isError:j,error:l}]=S(),[N,{isLoading:x,isSuccess:h}]=w(),[v,{isSuccess:g}]=k(),{data:p,refetch:B}=C(),[s,f]=d.useState(null),r=q({initialValues:{title:s?s.title:"",desc:s?s.desc:"",price:s?s.price:"",category:s?s.category:"",image:s?s.image:null},validationSchema:E({title:m().required("Title is required"),desc:m().required("Description is required"),price:F().required("Price is required").positive("Price must be a positive number"),category:m().required("Category is required").oneOf(["wedding","portrait","event","fashion","sports","landscape"],"Invalid category"),image:$().required("Image is required")}),onSubmit:(a,{resetForm:i})=>{const t=new FormData;Object.keys(a).forEach(o=>{o!=="image"&&t.append(o,a[o])}),a.image&&t.append("image",a.image),s?N({_id:s._id,fd:t}):(y(t),i())}});return d.useEffect(()=>{c&&n.success("add success")},[c]),d.useEffect(()=>{h&&n.success("update success")},[h]),d.useEffect(()=>{g&&n.success("delete success")},[g]),d.useEffect(()=>{s&&r.setValues({title:s.title,desc:s.desc,price:s.price,category:s.category,rating:s.rating,image:s.image})},[s]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-lg mx-auto p-4 bg-yellow-300 shadow-md rounded-lg",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-800",children:s?"Update Service":"Add Service"}),e.jsxs("form",{onSubmit:r.handleSubmit,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{id:"title",name:"title",type:"text",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.title,className:`mt-1 block w-full rounded-md shadow-sm border-gray-300 ${r.touched.title&&r.errors.title?"border-red-500":""}`}),r.touched.title&&r.errors.title&&e.jsx("span",{className:"text-sm text-red-500",children:r.errors.title})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"desc",className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{id:"desc",name:"desc",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.desc,className:`mt-1 block w-full rounded-md shadow-sm border-gray-300 ${r.touched.desc&&r.errors.desc?"border-red-500":""}`}),r.touched.desc&&r.errors.desc&&e.jsx("span",{className:"text-sm text-red-500",children:r.errors.desc})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Price"}),e.jsx("input",{id:"price",name:"price",type:"number",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.price,className:`mt-1 block w-full rounded-md shadow-sm border-gray-300 ${r.touched.price&&r.errors.price?"border-red-500":""}`}),r.touched.price&&r.errors.price&&e.jsx("span",{className:"text-sm text-red-500",children:r.errors.price})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsxs("select",{id:"category",name:"category",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.category,className:`mt-1 block w-full rounded-md shadow-sm border-gray-300 ${r.touched.category&&r.errors.category?"border-red-500":""}`,children:[e.jsx("option",{value:"",label:"Select category"}),e.jsx("option",{value:"wedding",label:"Wedding"}),e.jsx("option",{value:"portrait",label:"Portrait"}),e.jsx("option",{value:"event",label:"Event"}),e.jsx("option",{value:"fashion",label:"Fashion"}),e.jsx("option",{value:"landscape",label:"Landscape"}),e.jsx("option",{value:"sports",label:"sports"})]}),r.touched.category&&r.errors.category&&e.jsx("span",{className:"text-sm text-red-500",children:r.errors.category})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700",children:"Image"}),e.jsx("input",{id:"image",name:"image",type:"file",accept:"image/*",onChange:a=>r.setFieldValue("image",a.target.files[0]),className:`mt-1 block w-full rounded-md shadow-sm border-gray-300 ${r.touched.image&&r.errors.image?"border-red-500":""}`}),r.touched.image&&r.errors.image&&e.jsx("span",{className:"text-sm text-red-500",children:r.errors.image})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600",disabled:u||x,children:u||x?"Submitting...":"Submit"})]}),c&&e.jsx("p",{className:"mt-4 text-green-500",children:"Service added successfully!"}),j&&e.jsxs("p",{className:"mt-4 text-red-500",children:["Error: ",(b=l==null?void 0:l.data)==null?void 0:b.message]})]}),e.jsxs("table",{className:"w-full mt-6 table-auto border-collapse border border-gray-400",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Title"}),e.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Description"}),e.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Price"}),e.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Category"}),e.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Rating"}),e.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Image"}),e.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:p&&p.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-4 py-2",children:a.title}),e.jsx("td",{className:"border border-gray-400 px-4 py-2",children:a.desc}),e.jsx("td",{className:"border border-gray-400 px-4 py-2",children:a.price}),e.jsx("td",{className:"border border-gray-400 px-4 py-2",children:a.category}),e.jsx("td",{className:"border border-gray-400 px-4 py-2",children:a.rating}),e.jsx("td",{className:"border border-gray-400 px-4 py-2 w-[20%] ",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("div",{className:"flex",children:Array.isArray(a.image)?a.image.map((i,t)=>e.jsx("img",{src:i,alt:`Service ${t+1}`,className:"w-10 h-10 object-cover"},t)):e.jsx("img",{src:a.image,alt:"Service",className:"w-20 h-20 object-cover"})})})}),e.jsxs("td",{className:"border border-gray-400 px-4 py-2",children:[e.jsx("button",{onClick:()=>f(a),className:"mr-2 text-yellow-500",children:"Update"}),e.jsx("button",{onClick:()=>v(a._id),className:"text-red-500",children:"Delete"})]})]},a.id))})]})]})};export{P as default};
